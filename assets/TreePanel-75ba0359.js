import{e as l,y as U,k as G,H as K,j as i,l as R,f as O,I as q,v as J,C as Q,T as I,m as H}from"./index-9f212341.js";import{S as W}from"./arrow_right-0ebb3978.js";import{V as X}from"./VirtualScroll-d07feccc.js";import{C as V}from"./Checkbox-423c118d.js";import{E as M}from"./Empty-a389cfd2.js";const Y=_=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",..._},l.createElement("path",{d:"M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-8-2h2v-4h4v-2h-4V7h-2v4H7v2h4z"})),Z=_=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",..._},l.createElement("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zM7 11h10v2H7z"}));function F(_,A){const{namespace:T,styled:t,list:E,itemId:f,itemSelected:C,itemFocused:n,expands:b,customItem:v,showLine:z,multiple:h,onlyLeafSelectable:B,disabled:L,virtual:o,focusVisible:N,onNodeFocus:g,onNodeExpand:k,onNodeClick:x,onScrollBottom:$,...w}=_,{t:j}=U(),s=l.useRef(null),c=l.useRef(null),P=G(e=>{var p,d,y,S,a,u;if(s.current){let r;if(n){const m=b.has(n.id);switch(e){case"next":r=(p=c.current)==null?void 0:p.scrollToStep(s.current,1);break;case"prev":r=(d=c.current)==null?void 0:d.scrollToStep(s.current,-1);break;case"first":r=(y=c.current)==null?void 0:y.scrollToStart(s.current);break;case"last":r=(S=c.current)==null?void 0:S.scrollToEnd(s.current);break;case"prev-level":!n.isLeaf&&m?k(n):n.parent&&(r=(a=c.current)==null?void 0:a.scrollToItem(s.current,n.parent.id));break;case"next-level":n.isLeaf||(m?r=(u=c.current)==null?void 0:u.scrollToNested(s.current):k(n));break;default:e instanceof HTMLElement&&s.current&&K(e,s.current);break}}return r}});l.useImperativeHandle(A,()=>P,[P]);const D=l.useMemo(()=>({list:E,itemKey:e=>e.id,itemSize:(o==null?void 0:o.itemSize)??32,itemEmptySize:32,itemNested:e=>e.children,itemFocusable:e=>e.enabled,itemExpand:e=>e.children?b.has(e.id):void 0}),[b,E,o]);return i(X,{...D,ref:c,enable:!R.isUndefined(o),listSize:(o==null?void 0:o.listSize)??0,listPadding:(o==null?void 0:o.listPadding)??0,itemRender:(e,p,d,y,S)=>{if(e.children){const a=b.has(e.id);let u=!1;if(e.children&&C){let r=C;for(;r.parent;)if(r=r.parent,r.id===e.id){u=!0;break}}return l.createElement("li",{...t("tree__group",{"tree__group--root":d["aria-level"]===1}),...d,key:e.id,role:"treeitem","aria-expanded":a,"aria-selected":e.checked,"aria-disabled":e.disabled},O("div",{...t("tree__option",{"tree__option.is-selected":!h&&e.checked,"tree__option.is-disabled":e.disabled,"tree__option--root":d["aria-level"]===1,"tree__option--first":p===0}),id:f(e.id),title:e.origin.label,onClick:()=>{g(e),h||B?k(e):x(e)},children:[N&&(n==null?void 0:n.id)===e.id&&i("div",{className:`${T}-focus-outline`}),u&&i("div",{...t("tree__option-dot")}),i("div",{...t("tree__option-icon"),onClick:r=>{r.stopPropagation(),g(e),k(e)},children:i(q,{children:e.origin.loading?i(J,{}):z?a?i(Z,{}):i(Y,{}):i(W,{...t("tree__option-arrow",{"tree__option-arrow.is-expand":a})})})}),h&&i("div",{...t("tree__option-checkbox"),children:i(V,{model:e.checked,disabled:e.disabled,indeterminate:e.indeterminate,inputRender:r=>l.cloneElement(r,{tabIndex:-1}),onClick:r=>{r.stopPropagation(),g(e),x(e)}})}),i("div",{...t("tree__option-content"),children:v?v(e.origin):e.origin.label})]}),!e.origin.loading&&i(Q,{originalSize:{height:"auto"},collapsedSize:{height:0},enter:a,during:I,styles:{entering:{transition:["height","padding","margin"].map(r=>`${r} ${I}ms ease-out`).join(", ")},leaving:{transition:["height","padding","margin"].map(r=>`${r} ${I}ms ease-in`).join(", ")},leaved:{display:"none"}},children:(r,m)=>i("ul",{...H(t("tree__group"),{style:m}),ref:r,role:"group","aria-labelledby":f(e.id),children:S})}))}return l.createElement("li",{...t("tree__option",{"tree__option.is-selected":!h&&e.checked,"tree__option.is-disabled":e.disabled,"tree__option--root":d["aria-level"]===1,"tree__option--first":p===0}),...d,key:e.id,id:f(e.id),title:e.origin.label,role:"treeitem","aria-selected":e.checked,"aria-disabled":e.disabled,onClick:()=>{g(e),x(e)}},N&&(n==null?void 0:n.id)===e.id&&i("div",{className:`${T}-focus-outline`}),h&&i("div",{...t("tree__option-checkbox"),children:i(V,{model:e.checked,disabled:e.disabled,indeterminate:e.indeterminate,inputRender:a=>l.cloneElement(a,{tabIndex:-1}),onClick:a=>{a.stopPropagation(),g(e),x(e)}})}),i("div",{...t("tree__option-content"),children:v?v(e.origin):e.origin.label}))},itemFocused:n==null?void 0:n.id,itemEmptyRender:()=>i("li",{...t("tree__empty"),children:i("div",{...t("tree__option-content"),children:j("No Data")})}),itemInAriaSetsize:e=>!e.children,placeholder:"li",onScrollEnd:$,children:(e,p)=>i("ul",{...w,...H(t("tree",{"tree.is-disabled":L,"tree--line":z}),{className:w.className,style:w.style}),ref:s,role:"tree","aria-multiselectable":h,"aria-activedescendant":R.isUndefined(n)?void 0:f(n.id),onScroll:p,children:E.length===0?i(M,{style:{padding:"12px 28px"},image:M.SIMPLE_IMG}):e})})}const le=l.forwardRef(F);export{le as T};
