import{x as fe,o as g,c as ue,l as ae,e as C,Y as he,j as s,I as j,t as _e,u as pe,a as me,b as ge,d as q,z as Se,O as be,m as ve,B as Z,H as Ce}from"./index-249b6286.js";import{S as ye}from"./keyboard_arrow_left-9c5af2a5.js";import{S as xe}from"./search-b54e201a.js";import{C as ee}from"./Checkbox-461b2a38.js";import{I as Ie}from"./Input-99910117.js";import{V as Ee}from"./VirtualScroll-fbeeace4.js";import{E as se}from"./Empty-9c4c5720.js";const we={transfer:"^transfer","transfer.is-disabled":"is-disabled",transfer__panel:"^transfer__panel",transfer__actions:"^transfer__actions",transfer__header:"^transfer__header","transfer__header-title":"^transfer__header-title",transfer__search:"^transfer__search","transfer__list-container":"^transfer__list-container",transfer__list:"^transfer__list",transfer__loading:"^transfer__loading",transfer__option:"^transfer__option","transfer__option.is-disabled":"is-disabled","transfer__option-prefix":"^transfer__option-prefix","transfer__option-content":"^transfer__option-content"},m=Symbol();function te(z){const{namespace:B,styled:l,list:i,selectedCount:y,state:E,title:w,loading:D,searchable:F,virtual:_,customItem:M,onSelectedChange:x,onAllSelectedChange:f,onSearch:P,onScrollBottom:K}=z,{t:A}=fe(),V=g.useRef(null),c=ue(),k=t=>`${B}-transfer-item-${t}-${c}`,I=g.useCallback(t=>!t.disabled,[]),L=g.useMemo(()=>({list:i,itemKey:t=>t.value,itemSize:ae.isNumber(_)?_:32,itemFocusable:I}),[I,i,_]);return C("div",{...l("transfer__panel"),children:[C("div",{...l("transfer__header"),children:[C(ee,{model:E===!0,indeterminate:E==="mixed",disabled:i.length===0,onModelChange:t=>{f(t)},children:[y,"/",i.length]}),he(w)&&s("div",{...l("transfer__header-title"),children:w})]}),F&&s("div",{...l("transfer__search"),children:s(Ie,{style:{display:"flex"},placeholder:A("Search"),prefix:s(j,{children:s(xe,{})}),clearable:!0,onModelChange:P})}),C("div",{...l("transfer__list-container"),children:[D&&s("div",{...l("transfer__loading"),children:s(j,{children:s(_e,{})})}),s(Ee,{...L,ref:V,enable:_!==!1,listSize:192,listPadding:0,itemRender:(t,S,R)=>{const{label:p,value:b,disabled:v}=t;return g.createElement("li",{...l("transfer__option",{"transfer__option.is-disabled":v}),...R,key:b,id:k(b),title:p,onClick:()=>{v||x==null||x(b)}},s("div",{...l("transfer__option-prefix"),children:s(ee,{model:t[m],disabled:v})}),s("div",{...l("transfer__option-content"),children:M?M(t):p}))},placeholder:"li",onScrollEnd:K,children:(t,S)=>s("ul",{...l("transfer__list"),onScroll:S,children:i.length===0?s(se,{style:{marginTop:32},image:se.SIMPLE_IMG}):t})})]})]})}function Ne(z){const{styleOverrides:B,styleProvider:l,formControl:i,list:y,model:E,defaultModel:w,selected:D,defaultSelected:F,searchable:_=!1,searchValue:M,defaultSearchValue:x,title:f,loading:P=[!1,!1],disabled:K=!1,virtual:A=!1,customItem:V,customSearch:c,onModelChange:k,onSelectedChange:I,onSearch:L,onScrollBottom:t,...S}=pe("Transfer",z),R=me(),p=ge(we,{transfer:l==null?void 0:l.transfer},B),b=g.useMemo(()=>new Map(y.map(e=>[e.value,e])),[y]),[v,ne]=q(w??[],E,e=>{k&&k(e,e.map(a=>b.get(a)))},void 0,i==null?void 0:i.control),re=g.useMemo(()=>new Set(v),[v]),[G,O]=q(F??[],D,e=>{I&&I(e,e.map(a=>b.get(a)))}),le=g.useMemo(()=>new Set(G),[G]),[$,H]=q(x??["",""],M,L),{disabled:oe}=Se({disabled:K||(i==null?void 0:i.control.disabled)}),[u,U,T]=(()=>{const e=[[],[]],a=[0,0],o=[!0,!0],n=[!0,!0],h=[!1,!1],de=ae.isUndefined(c==null?void 0:c.filter)?(r,d)=>r.label.includes(d):(r,d)=>c.filter(d,r),N=c==null?void 0:c.sort;y.forEach(r=>{const d=re.has(r.value)?1:0,W=Object.assign({[m]:!1},r),X=$[d];(!X||de(r,X))&&(le.has(r.value)?(W[m]=!0,a[d]+=1,r.disabled||(h[d]=!0)):r.disabled||(n[d]=!1),e[d].push(W),r.disabled||(o[d]=!1))}),$[0]&&N&&e[0].sort(N),$[1]&&N&&e[1].sort(N);const ce=[0,1].map(r=>o[r]?!1:n[r]?!0:h[r]?"mixed":!1);return[e,a,ce]})(),Y=e=>{O(a=>{const o=a.findIndex(n=>n===e);o!==-1?a.splice(o,1):a.push(e)})},J=(e,a)=>{O(o=>{const n=new Set(o);for(const h of a?u[0]:u[1])h.disabled||(e&&!h[m]?n.add(h.value):!e&&h[m]&&n.delete(h.value));return Array.from(n)})},Q=e=>{ne(a=>{const o=new Set(a);return(e?u[0]:u[1]).forEach(n=>{n[m]&&(e?o.add(n.value):o.delete(n.value))}),Array.from(o)}),O(a=>{const o=new Set(a);return(e?u[0]:u[1]).forEach(n=>{n[m]&&o.delete(n.value)}),Array.from(o)})},ie=be({form:i});return C("div",{...S,...ve(p("transfer",{"transfer.is-disabled":oe}),{className:S.className,style:S.style}),...ie,children:[s(te,{namespace:R,styled:p,list:u[0],selectedCount:U[0],state:T[0],title:f==null?void 0:f[0],loading:P[0]??!1,searchable:_,virtual:A,customItem:V,onSelectedChange:Y,onAllSelectedChange:e=>{J(e,!0)},onSearch:e=>{H(a=>{a[0]=e})},onScrollBottom:()=>{t==null||t("left")}}),C("div",{...p("transfer__actions"),children:[s(Z,{disabled:T[0]===!1,pattern:"secondary",icon:s(j,{children:s(Ce,{})}),onClick:()=>{Q(!0)}}),s(Z,{disabled:T[1]===!1,pattern:"secondary",icon:s(j,{children:s(ye,{})}),onClick:()=>{Q(!1)}})]}),s(te,{namespace:R,styled:p,list:u[1],selectedCount:U[1],state:T[1],title:f==null?void 0:f[1],loading:P[1]??!1,searchable:_,virtual:A,customItem:V,onSelectedChange:Y,onAllSelectedChange:e=>{J(e,!1)},onSearch:e=>{H(a=>{a[1]=e})},onScrollBottom:()=>{t==null||t("right")}})]})}export{Ne as T};
