import{u as Z,b as Q,x as se,d as H,j as r,m as z,o as a,B as J,e as j,I as me,N as he,a as _e,f as ye,c as be,h as ne,L as Pe,l as V,i as Ee,ad as xe,V as Ie,ae as $e,F as ke,P as Le,q as Re,ac as Se}from"./index-249b6286.js";const X={popover:"^popover","popover--top":"^popover--top","popover--top-left":"^popover--top-left","popover--top-right":"^popover--top-right","popover--right":"^popover--right","popover--right-top":"^popover--right-top","popover--right-bottom":"^popover--right-bottom","popover--bottom":"^popover--bottom","popover--bottom-left":"^popover--bottom-left","popover--bottom-right":"^popover--bottom-right","popover--left":"^popover--left","popover--left-top":"^popover--left-top","popover--left-bottom":"^popover--left-bottom",popover__mask:"^popover__mask",popover__content:"^popover__content",popover__arrow:"^popover__arrow",popover__header:"^popover__header","popover__header-title":"^popover__header-title","popover__header-actions":"^popover__header-actions",popover__body:"^popover__body",popover__footer:"^popover__footer","popover__footer--left":"^popover__footer--left","popover__footer--center":"^popover__footer--center","popover__footer--right":"^popover__footer--right"},G={enter:86,leave:100};function we(R){const{styleOverrides:S,styleProvider:i,align:w="right",actions:h=["cancel","ok"],cancelProps:l,okProps:t,onCancelClick:u,onOkClick:n,_onClose:o,...v}=Z("PopoverFooter",R),P=Q(X,{popover:i==null?void 0:i.popover},S),{t:E}=se(),[x,c]=H(!1,l==null?void 0:l.loading),[d,I]=H(!1,t==null?void 0:t.loading),F={...l,loading:x,onClick:()=>{const e=u==null?void 0:u();e instanceof Promise?(c(!0),e.then(N=>{c(!1),N!==!1&&(o==null||o())})):e!==!1&&(o==null||o())}},O={...t,loading:d,onClick:()=>{const e=n==null?void 0:n();e instanceof Promise?(I(!0),e.then(N=>{I(!1),N!==!1&&(o==null||o())})):e!==!1&&(o==null||o())}};return r("div",{...v,...z(P("popover__footer",`popover__footer--${w}`),{className:v.className,style:v.style}),children:a.Children.map(h,e=>e==="cancel"?r(J,{...F,pattern:F.pattern??"secondary",children:F.children??E("Footer","Cancel")}):e==="ok"?r(J,{...O,children:O.children??E("Footer","OK")}):e)})}function pe(R){const{styleOverrides:S,styleProvider:i,children:w,actions:h=[],closeProps:l,onCloseClick:t,_id:u,_onClose:n,...o}=Z("PopoverHeader",R),v=Q(X,{popover:i==null?void 0:i.popover},S),{t:P}=se(),[E,x]=H(!1,l==null?void 0:l.loading),c={...l,loading:E,onClick:()=>{const d=t==null?void 0:t();d instanceof Promise?(x(!0),d.then(I=>{x(!1),I!==!1&&(n==null||n())})):d!==!1&&(n==null||n())}};return j("div",{...o,...z(v("popover__header"),{className:o.className,style:o.style}),children:[r("div",{...v("popover__header-title"),id:u,children:w}),r("div",{...v("popover__header-actions"),children:a.Children.map(h,d=>d==="close"?r(J,{...c,"aria-label":c["aria-label"]??P("Close"),pattern:c.pattern??"text",icon:c.icon??r(me,{children:r(he,{})})}):d)})]})}function Fe(R,S){const{children:i,styleOverrides:w,styleProvider:h,content:l,header:t,footer:u,visible:n,defaultVisible:o,trigger:v="hover",placement:P="top",placementFixed:E=!1,arrow:x=!0,escClosable:c=!0,gap:d=10,inWindow:I=!1,mouseEnterDelay:F=150,mouseLeaveDelay:O=200,modal:e=!1,skipFirstTransition:N=!0,destroyAfterClose:ie=!0,zIndex:Y,scrolling:le,onVisibleChange:ce,afterVisibleChange:$,..._}=Z("Popover",R),de=e?"click":v,g=_e(),D=Q(X,{popover:h==null?void 0:h.popover},w),A=ye(),B=be();let W;const ee=`${g}-popover-title-${B}`,oe=`${g}-popover-content-${B}`,q=ne(()=>document.getElementById(W)),k=a.useRef(null),y=a.useRef(null),ve=ne(le),M=a.useRef({prevActiveEl:null}),[b,L]=H(o??!1,n,ce),fe=Pe(b),ue=V.isUndefined(Y)?`calc(var(--${g}-zindex-fixed) + ${fe})`:Y,U=a.useRef(),K=a.useRef(P),T=Ee(()=>{if(b&&q.current&&k.current&&y.current){const m=xe(q.current,{width:y.current.offsetWidth,height:y.current.offsetHeight},{placement:P,placementFallback:K.current,placementFixed:E,gap:d,inWindow:I});U.current=m.transformOrigin,k.current.classList.toggle(`${g}-popover--${K.current}`,!1),K.current=m.placement,k.current.classList.toggle(`${g}-popover--${K.current}`,!0),A.classes.position&&y.current.classList.toggle(A.classes.position,!1),A.replaceRule("position",{top:m.top,left:m.left}),y.current.classList.toggle(A.classes.position,!0)}});Ie(e&&b),a.useImperativeHandle(S,()=>({updatePosition:T}),[T]);const re=(()=>{if(t){const m=V.isString(t)?r(pe,{children:t}):t;return a.cloneElement(m,{_id:ee,_onClose:()=>{L(!1)}})}})();return r($e,{visible:b,trigger:de,mouseEnterDelay:F,mouseLeaveDelay:O,updatePosition:{fn:T,triggerRef:q,popupRef:y,containerRefs:[ve]},onVisibleChange:L,children:({renderTrigger:m,renderPopup:ge})=>{const te=s=>(W=s.props.id??`${g}-popover-trigger-${B}`,m(a.cloneElement(s,{id:W,onKeyDown:f=>{var p,C;(C=(p=s.props).onKeyDown)==null||C.call(p,f),b&&c&&f.code==="Escape"&&(f.stopPropagation(),f.preventDefault(),L(!1))}})));return j(ke,{children:[V.isFunction(i)?i(te):te(i),r(Le,{selector:()=>{let s=document.getElementById(`${g}-popover-root`);return s||(s=document.createElement("div"),s.id=`${g}-popover-root`,document.body.appendChild(s)),s},children:r(Re,{enter:b,during:G,skipFirstTransition:N,destroyWhenLeaved:ie,afterRender:T,afterEnter:()=>{$==null||$(!0),e&&(M.current.prevActiveEl=document.activeElement,k.current&&k.current.focus({preventScroll:!0}))},afterLeave:()=>{$==null||$(!1),e&&M.current.prevActiveEl&&M.current.prevActiveEl.focus({preventScroll:!0})},children:s=>{let f={};switch(s){case"enter":f={transform:"scale(0.3)",opacity:0};break;case"entering":f={transition:["transform","opacity"].map(p=>`${p} ${G.enter}ms ease-out`).join(", "),transformOrigin:U.current};break;case"leaving":f={transform:"scale(0.3)",opacity:0,transition:["transform","opacity"].map(p=>`${p} ${G.leave}ms ease-in`).join(", "),transformOrigin:U.current};break}return j("div",{..._,...z(D("popover"),{className:_.className,style:{..._.style,zIndex:ue,display:s==="leaved"?"none":void 0}}),ref:k,tabIndex:-1,role:_.role??e?"alertdialog":"dialog","aria-modal":e,"aria-labelledby":re?ee:void 0,"aria-describedby":oe,onKeyDown:p=>{var C;(C=_.onKeyDown)==null||C.call(_,p),b&&c&&p.code==="Escape"&&(p.stopPropagation(),p.preventDefault(),L(!1)),e&&Se(p)},children:[e&&r("div",{...D("popover__mask"),onClick:()=>{L(!1)}}),ge(j("div",{ref:y,...z(D("popover__content"),{style:f}),children:[x&&r("div",{...D("popover__arrow")}),re,r("div",{...D("popover__body"),id:oe,children:l}),u&&a.cloneElement(u,{_onClose:()=>{L(!1)}})]}))]})}})})]})}})}const ae=a.forwardRef(Fe);ae.Header=pe;ae.Footer=we;export{ae as P};
