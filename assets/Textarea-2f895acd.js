import{e as m,u as F,b as j,g as A,d as M,A as P,l as s,P as $,f as k,F as D,j as p,m as J}from"./index-85e8a7cd.js";import{u as O}from"./useForkRef-6c3bcbe6.js";const V={textarea:"^textarea","textarea--small":"^textarea--small","textarea--medium":"^textarea--medium","textarea--large":"^textarea--large",textarea__count:"^textarea__count"},G=m.forwardRef((b,R)=>{const{styleOverrides:T,styleProvider:u,formControl:r,model:S,defaultModel:y,autoRows:a=!1,resizable:z=!0,showCount:d=!1,size:H,onModelChange:_,...t}=F("Textarea",b),w=j(V,{textarea:u==null?void 0:u.textarea},T),l=A(),e=m.useRef(null),C=O(e,R),[o,L]=M(y??"",S,_,void 0,r==null?void 0:r.control),{size:N,disabled:U}=P({size:H,disabled:t.disabled||(r==null?void 0:r.control.disabled)});m.useEffect(()=>{if(e.current){const n=e.current.style.cssText;e.current.value="",e.current.rows=1,e.current.style.cssText=n+"box-sizing:content-box;overflow:hidden;height:0px;min-height:unset;";const i=e.current.offsetHeight;e.current.style.cssText=n+"overflow:hidden;height:0px;min-height:unset;padding:0px;";const c=e.current.scrollHeight;e.current.value=o;const v=Math.round(e.current.scrollHeight/c);s.isNumber(t.rows)?e.current.rows=t.rows:e.current.removeAttribute("rows"),e.current.style.cssText=n;let x,h,g,f;a!==!1&&(x=v*c,h="hidden",a!==!0&&(s.isNumber(a.minRows)&&(g=a.minRows*c),s.isNumber(a.maxRows)&&(f=a.maxRows*c,a.maxRows<v&&(h=void 0)))),l.classes.rows&&e.current.classList.toggle(l.classes.rows,!1),l.replaceRule("rows",{height:s.isUndefined(x)?void 0:x+i,overflow:s.isUndefined(h)?void 0:"hidden",minHeight:s.isUndefined(g)?void 0:g+i,maxHeight:s.isUndefined(f)?void 0:f+i}),e.current.classList.toggle(l.classes.rows,!0)}});const E=$({form:r});return k(D,{children:[p("textarea",{...t,...J(w("textarea",`textarea--${N}`),{className:t.className,style:{...t.style,resize:z&&a===!1?void 0:"none"}}),...E,ref:C,value:o,disabled:U,onChange:n=>{var i;(i=t.onChange)==null||i.call(t,n),L(n.currentTarget.value)}}),d!==!1&&p("div",{...w("textarea__count"),children:s.isFunction(d)?d(o.length):s.isUndefined(t.maxLength)?o.length:`${o.length} / ${t.maxLength}`})]})});export{G as T};
