import{o as m,u as F,b as j,f as M,d as $,z as A,l as s,O,e as P,F as k,j as p,m as D}from"./index-249b6286.js";import{u as J}from"./useForkRef-71e20439.js";const V={textarea:"^textarea","textarea--small":"^textarea--small","textarea--medium":"^textarea--medium","textarea--large":"^textarea--large",textarea__count:"^textarea__count"},G=m.forwardRef((b,R)=>{const{styleOverrides:T,styleProvider:u,formControl:r,model:z,defaultModel:S,autoRows:a=!1,resizable:y=!0,showCount:d=!1,size:H,onModelChange:_,...t}=F("Textarea",b),w=j(V,{textarea:u==null?void 0:u.textarea},T),l=M(),e=m.useRef(null),C=J(e,R),[i,L]=$(S??"",z,_,void 0,r==null?void 0:r.control),{size:N,disabled:U}=A({size:H,disabled:t.disabled||(r==null?void 0:r.control.disabled)});m.useEffect(()=>{if(e.current){const n=e.current.style.cssText;e.current.value="",e.current.rows=1,e.current.style.cssText=n+"box-sizing:content-box;overflow:hidden;height:0px;min-height:unset;";const o=e.current.offsetHeight;e.current.style.cssText=n+"overflow:hidden;height:0px;min-height:unset;padding:0px;";const c=e.current.scrollHeight;e.current.value=i;const v=Math.round(e.current.scrollHeight/c);s.isNumber(t.rows)?e.current.rows=t.rows:e.current.removeAttribute("rows"),e.current.style.cssText=n;let x,h,f,g;a!==!1&&(x=v*c,h="hidden",a!==!0&&(s.isNumber(a.minRows)&&(f=a.minRows*c),s.isNumber(a.maxRows)&&(g=a.maxRows*c,a.maxRows<v&&(h=void 0)))),l.classes.rows&&e.current.classList.toggle(l.classes.rows,!1),l.replaceRule("rows",{height:s.isUndefined(x)?void 0:x+o,overflow:s.isUndefined(h)?void 0:"hidden",minHeight:s.isUndefined(f)?void 0:f+o,maxHeight:s.isUndefined(g)?void 0:g+o}),e.current.classList.toggle(l.classes.rows,!0)}});const E=O({form:r});return P(k,{children:[p("textarea",{...t,...D(w("textarea",`textarea--${N}`),{className:t.className,style:{...t.style,resize:y&&a===!1?void 0:"none"}}),...E,ref:C,value:i,disabled:U,onChange:n=>{var o;(o=t.onChange)==null||o.call(t,n),L(n.currentTarget.value)}}),d!==!1&&p("div",{...w("textarea__count"),children:s.isFunction(d)?d(i.length):s.isUndefined(t.maxLength)?i.length:`${i.length} / ${t.maxLength}`})]})});export{G as T};
