import{u as V,b as X,y as se,d as H,j as r,m as z,o as a,B as Q,e as j,I as me,O as he,a as _e,f as ye,c as be,h as ne,M as Pe,l as G,i as Ee,ae as Ie,X as $e,af as xe,F as ke,Q as Re,q as Le,ad as Se}from"./index-118b7fb5.js";const Z={popover:"^popover","popover--top":"^popover--top","popover--top-left":"^popover--top-left","popover--top-right":"^popover--top-right","popover--right":"^popover--right","popover--right-top":"^popover--right-top","popover--right-bottom":"^popover--right-bottom","popover--bottom":"^popover--bottom","popover--bottom-left":"^popover--bottom-left","popover--bottom-right":"^popover--bottom-right","popover--left":"^popover--left","popover--left-top":"^popover--left-top","popover--left-bottom":"^popover--left-bottom",popover__mask:"^popover__mask",popover__content:"^popover__content",popover__arrow:"^popover__arrow",popover__header:"^popover__header","popover__header-title":"^popover__header-title","popover__header-actions":"^popover__header-actions",popover__body:"^popover__body",popover__footer:"^popover__footer","popover__footer--left":"^popover__footer--left","popover__footer--center":"^popover__footer--center","popover__footer--right":"^popover__footer--right"},J={enter:86,leave:100};function we(L){const{styleOverrides:S,styleProvider:i,align:w="right",actions:h=["cancel","ok"],cancelProps:l,okProps:t,onCancelClick:u,onOkClick:n,_onClose:o,...v}=V("PopoverFooter",L),P=X(Z,{popover:i==null?void 0:i.popover},S),{t:E}=se(),[I,c]=H(!1,l==null?void 0:l.loading),[d,$]=H(!1,t==null?void 0:t.loading),F={...l,loading:I,onClick:()=>{const e=u==null?void 0:u();e instanceof Promise?(c(!0),e.then(N=>{c(!1),N!==!1&&(o==null||o())})):e!==!1&&(o==null||o())}},C={...t,loading:d,onClick:()=>{const e=n==null?void 0:n();e instanceof Promise?($(!0),e.then(N=>{$(!1),N!==!1&&(o==null||o())})):e!==!1&&(o==null||o())}};return r("div",{...v,...z(P("popover__footer",`popover__footer--${w}`),{className:v.className,style:v.style}),children:a.Children.map(h,e=>e==="cancel"?r(Q,{...F,pattern:F.pattern??"secondary",children:F.children??E("Footer","Cancel")}):e==="ok"?r(Q,{...C,children:C.children??E("Footer","OK")}):e)})}function pe(L){const{styleOverrides:S,styleProvider:i,children:w,actions:h=[],closeProps:l,onCloseClick:t,_id:u,_onClose:n,...o}=V("PopoverHeader",L),v=X(Z,{popover:i==null?void 0:i.popover},S),{t:P}=se(),[E,I]=H(!1,l==null?void 0:l.loading),c={...l,loading:E,onClick:()=>{const d=t==null?void 0:t();d instanceof Promise?(I(!0),d.then($=>{I(!1),$!==!1&&(n==null||n())})):d!==!1&&(n==null||n())}};return j("div",{...o,...z(v("popover__header"),{className:o.className,style:o.style}),children:[r("div",{...v("popover__header-title"),id:u,children:w}),r("div",{...v("popover__header-actions"),children:a.Children.map(h,d=>d==="close"?r(Q,{...c,"aria-label":c["aria-label"]??P("Close"),pattern:c.pattern??"text",icon:c.icon??r(me,{children:r(he,{})})}):d)})]})}function Fe(L,S){const{children:i,styleOverrides:w,styleProvider:h,content:l,header:t,footer:u,visible:n,defaultVisible:o,trigger:v="hover",placement:P="top",placementFixed:E=!1,arrow:I=!0,escClosable:c=!0,gap:d=10,inWindow:$=!1,mouseEnterDelay:F=150,mouseLeaveDelay:C=200,modal:e=!1,skipFirstTransition:N=!0,destroyAfterClose:ie=!0,zIndex:Y,scrolling:le,onVisibleChange:ce,afterVisibleChange:x,..._}=V("Popover",L),de=e?"click":v,g=_e(),D=X(Z,{popover:h==null?void 0:h.popover},w),A=ye(),B=be();let M;const ee=`${g}-popover-title-${B}`,oe=`${g}-popover-content-${B}`,W=ne(()=>document.getElementById(M)),k=a.useRef(null),y=a.useRef(null),ve=ne(le),q=a.useRef({prevActiveEl:null}),[b,R]=H(o??!1,n,ce),fe=Pe(b),ue=G.isUndefined(Y)?`calc(var(--${g}-zindex-fixed) + ${fe})`:Y,U=a.useRef(),K=a.useRef(P),T=Ee(()=>{if(b&&W.current&&k.current&&y.current){const m=Ie(W.current,{width:y.current.offsetWidth,height:y.current.offsetHeight},{placement:P,placementFallback:K.current,placementFixed:E,gap:d,inWindow:$});U.current=m.transformOrigin,k.current.classList.toggle(`${g}-popover--${K.current}`,!1),K.current=m.placement,k.current.classList.toggle(`${g}-popover--${K.current}`,!0),A.classes.position&&y.current.classList.toggle(A.classes.position,!1),A.replaceRule("position",{top:m.top,left:m.left}),y.current.classList.toggle(A.classes.position,!0)}});$e(e&&b),a.useImperativeHandle(S,()=>({updatePosition:T}),[T]);const re=(()=>{if(t){const m=G.isString(t)?r(pe,{children:t}):t;return a.cloneElement(m,{_id:ee,_onClose:()=>{R(!1)}})}})();return r(xe,{visible:b,trigger:de,mouseEnterDelay:F,mouseLeaveDelay:C,updatePosition:{fn:T,triggerRef:W,popupRef:y,containerRefs:[ve]},onVisibleChange:R,children:({renderTrigger:m,renderPopup:ge})=>{const te=s=>(M=s.props.id??`${g}-popover-trigger-${B}`,m(a.cloneElement(s,{id:M,onKeyDown:f=>{var p,O;(O=(p=s.props).onKeyDown)==null||O.call(p,f),b&&c&&f.code==="Escape"&&(f.stopPropagation(),f.preventDefault(),R(!1))}})));return j(ke,{children:[G.isFunction(i)?i(te):te(i),r(Re,{selector:()=>{let s=document.getElementById(`${g}-popover-root`);return s||(s=document.createElement("div"),s.id=`${g}-popover-root`,document.body.appendChild(s)),s},children:r(Le,{enter:b,during:J,skipFirstTransition:N,destroyWhenLeaved:ie,afterRender:T,afterEnter:()=>{x==null||x(!0),e&&(q.current.prevActiveEl=document.activeElement,k.current&&k.current.focus({preventScroll:!0}))},afterLeave:()=>{x==null||x(!1),e&&q.current.prevActiveEl&&q.current.prevActiveEl.focus({preventScroll:!0})},children:s=>{let f={};switch(s){case"enter":f={transform:"scale(0.3)",opacity:0};break;case"entering":f={transition:["transform","opacity"].map(p=>`${p} ${J.enter}ms ease-out`).join(", "),transformOrigin:U.current};break;case"leaving":f={transform:"scale(0.3)",opacity:0,transition:["transform","opacity"].map(p=>`${p} ${J.leave}ms ease-in`).join(", "),transformOrigin:U.current};break}return j("div",{..._,...z(D("popover"),{className:_.className,style:{..._.style,zIndex:ue,display:s==="leaved"?"none":void 0}}),ref:k,tabIndex:-1,role:_.role??e?"alertdialog":"dialog","aria-modal":e,"aria-labelledby":re?ee:void 0,"aria-describedby":oe,onKeyDown:p=>{var O;(O=_.onKeyDown)==null||O.call(_,p),b&&c&&p.code==="Escape"&&(p.stopPropagation(),p.preventDefault(),R(!1)),e&&Se(p)},children:[e&&r("div",{...D("popover__mask"),onClick:()=>{R(!1)}}),ge(j("div",{ref:y,...z(D("popover__content"),{style:f}),children:[I&&r("div",{...D("popover__arrow")}),re,r("div",{...D("popover__body"),id:oe,children:l}),u&&a.cloneElement(u,{_onClose:()=>{R(!1)}})]}))]})}})})]})}})}const ae=a.forwardRef(Fe);ae.Header=pe;ae.Footer=we;export{ae as P};
