import{e as a,u as q,a as A,g as F,h as P,c as T,i as g,l as r,k as U,n as $,o as E,p as v,f as B,F as G}from"./index-ba6b8087.js";import{u as M,g as k}from"./getOffsetToRoot-345a52d3.js";import{t as j}from"./toPx-e0159df1.js";const O=a.forwardRef((b,z)=>{const{children:f,top:d=0,target:c,zIndex:I}=q("Affix",b),w=A(),s=F(),{pageScrollRef:h,contentResizeRef:C}=P(),l=T(),n=g(()=>document.querySelector(`[data-l-affix="${l}"]`)),o=g(()=>document.querySelector(`[data-l-affix-placeholder="${l}"]`)),i=g(r.isUndefined(c)?()=>h.current:c),[u,L]=a.useState(!1),e=U(()=>{if(n.current&&o.current&&i.current){const t=u?o.current:n.current,p=t.getBoundingClientRect(),R=k(i.current),y=r.isString(d)?j(d,!0):d,S=Math.ceil(i.current.scrollTop)+y>=k(t)-R;L(S),s.classes.position&&n.current.classList.toggle(s.classes.position,!1),S?(s.replaceRule("position",{width:p.width,height:p.height,position:"fixed",top:(r.isUndefined(c)?R:i.current.getBoundingClientRect().top)+y,left:p.left,zIndex:I??`var(--${w}-zindex-sticky)`}),n.current.classList.toggle(s.classes.position,!0),o.current.style.display=""):(s.deleteRule("position"),o.current.style.display="none")}});M(()=>{e()});const x=$(e);E(h,"scroll",e,{passive:!0},x),E(i,"scroll",e,{passive:!0},x||r.isUndefined(c)),v(u?o:n,e),v(C,e),a.useImperativeHandle(z,()=>({sticky:u,updatePosition:e}),[u,e]);const m=t=>B(G,{children:[a.cloneElement(t,{style:{...t.props.style,visibility:"hidden"},"aria-hidden":!0,"data-l-affix-placeholder":l}),a.cloneElement(t,{"data-l-affix":l})]});return r.isFunction(f)?f(m):m(f)});export{O as A};
